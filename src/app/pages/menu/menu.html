<div class="menu-container" [@fadeIn]>
	<div class="menu-header">
		<button class="voltar-btn" (click)="voltarOptions()">â† Voltar</button>
		<h2 class="menu-title">Menu do Dia</h2>
	</div>
	<div class="menu-list" [@listAnim]>
		<div *ngFor="let lanche of lanchesOrdenados" class="lanche-card" [class.mais-vendido]="lanche.maisVendido" [class.esgotado]="lanche.status === 'esgotado'">
			<div class="lanche-foto-wrapper">
				<img *ngIf="lanche.foto" [src]="lanche.foto" [alt]="lanche.nome" class="lanche-foto" />
				<div *ngIf="!lanche.foto" class="lanche-foto-placeholder">ğŸ”</div>
				<span *ngIf="lanche.maisVendido" class="badge badge-vendido">Mais vendido</span>
				<span *ngIf="lanche.status === 'esgotado'" class="badge badge-esgotado">Esgotado</span>
			</div>
			<div class="lanche-info">
				<div class="lanche-nome">{{ lanche.nome }}</div>
				<div class="lanche-preco">R$ {{ lanche.preco | number:'1.2-2' }}</div>
				<button class="btn-reserva" [disabled]="lanche.status === 'esgotado'" (click)="adicionarReserva(lanche)">
					Adicionar Ã  reserva
				</button>
			</div>
		</div>
	</div>

	<!-- BotÃ£o Flutuante do Chat -->
	<button class="chat-toggle-btn" (click)="toggleChat()" [@buttonPulse] [class.active]="chatAberto">
		<span *ngIf="!chatAberto">ğŸ’¬</span>
		<span *ngIf="chatAberto">âœ•</span>
	</button>

	<!-- Caixa de Chat -->
	<div class="chat-container" [@chatSlide]="chatAberto ? 'open' : 'closed'">
		<div class="chat-header">
			<div class="chat-header-content">
				<span class="chat-icon">ğŸ¤–</span>
				<div>
					<h3 class="chat-title">Assistente Virtual</h3>
					<p class="chat-subtitle">Online</p>
				</div>
			</div>
			<button class="chat-close-btn" (click)="fecharChat()">âœ•</button>
		</div>

		<div class="chat-messages">
			<div *ngFor="let msg of mensagens"
				 class="chat-message"
				 [class.user]="msg.sender === 'user'"
				 [class.bot]="msg.sender === 'bot'"
				 [@messageAnim]>
				<div class="message-bubble">
					<p class="message-text">{{ msg.text }}</p>
					<span class="message-time">{{ msg.timestamp | date:'HH:mm' }}</span>
				</div>
			</div>
		</div>

		<div class="chat-input-container">
			<input
				type="text"
				class="chat-input"
				[(ngModel)]="novaMensagem"
				(keyup.enter)="enviarMensagem()"
				placeholder="Digite sua mensagem..."
			/>
			<button class="chat-send-btn" (click)="enviarMensagem()" [disabled]="!novaMensagem.trim()">
				<span>â¤</span>
			</button>
		</div>
	</div>
</div>
